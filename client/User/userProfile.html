<!-- Dieses Template bekommt über den IronRouter die informationen über den user -->
<template name="profile">

	<div id="userProfile" class="container">
	<div class="row">

	{{addDeleteProfilePicButton}}

	{{#if hasRobots _id}}
		<div class="col s12 m12 l6">

		<!-- Das Label aktiviert den Bildupload -->
		<div id="avatarCenter">
		{{#if isActiveUser _id}}
		<label for="profilePic" form="profilePicUpload" id="profilePicLabel">
		{{> avatar user=this shape="circle" size="profile"}}
		</label>
		{{else}}
		{{> avatar user=this shape="circle" size="profile"}}
		{{/if}}
		</div>


		<p class="username"><span id="firstname">{{profile.firstname}}</span> <span id="lastname">{{profile.lastname}}</span></p>

		<!-- Form für den Dateiupload. Das label befindet sich allerdings um das Avatar Template herum -->
		<form id="profilePicUpload">
			<input type="file" name="profilePic" id="profilePic">
		</form>

		<!-- col -->
		</div>


		<div class="col s12 m12 l6">
		{{>userRobots}}

		{{#if isActiveUser _id}}
			<br/>
			{{>uploadRobot}}
		{{/if}}

		<!-- col -->
		</div>

	<!-- user hat keine Roboter. Volle Breite der Seite nutzen -->
	{{else}}

		<div class="col s12 m12 l12">

		<div id="avatarCenter">
		{{#if isActiveUser _id}}
		<label for="profilePic" form="profilePicUpload" id="profilePicLabel">
		{{> avatar user=this shape="circle" size="profile"}}
		</label>
		{{else}}
		{{> avatar user=this shape="circle" size="profile"}}
		{{/if}}
		</div>

		<p class="username"><span id="firstname">{{profile.firstname}}</span> <span id="lastname">{{profile.lastname}}</span></p>

		<!-- Form für den Dateiupload. Das label befindet sich allerdings um das Avatar Template herum -->
		<form id="profilePicUpload">
			<input type="file" name="profilePic" id="profilePic">
		</form>

		{{#if isActiveUser _id}}
			<br/>
			{{>uploadRobot}}
		{{/if}}
	
		<!-- col -->
		</div>

	{{/if}}

	<!-- Row -->
	</div>
	<!-- Container -->
	</div>
	
	
</template> 


<!-- Listet die Roboter zu einem User -->
<template name="userRobots">
	<h2>Roboter</h2>
	<!-- Die _id variable sickert von dem profile template durch und komm ursprünglich vom IronRouter -->
	<div id="robotBox">
	{{#each listUserRobots _id}}
		{{>profileRobot}}
	{{/each}}
	</div>
</template>

<template name="profileRobot">
	<div class="profileBot">
	<h3>{{name}} 
	{{#if checkDownloadableCondition}} 
	<a href="{{downloadUrl}}"><i class="mdi mdi-download"></i></a>
	{{/if}} 
	{{#if belongsToUser }} <i class="mdi mdi-delete delete" name="deleteRobot"></i>
	{{/if}}
	</h3>
	<p class="botdescription">{{description}}</p>
	</div>
</template>

