<template name="tournamentDetail">
	
	<div class="container" id="tournamentDetail">

	<h1 data-id="{{_id}}">{{name}}</h1>
	<p><i class="mdi mdi-calendar-blank"></i> {{displayDate}} <i class="mdi mdi-account"></i> {{paticipantCount}} </p>

	<br/>

	{{#if hasParticipants}}
	{{>tournamentParticipants}}
	{{/if}}
	
	{{#unless userHasRobotInTournament}}
		{{#unless ended}}
			{{#if userHasRobots}}
				<br/>
				{{>tournamentEntry}}
			{{/if}}
		{{/unless}}
	{{/unless}}

	{{#if isInRole "admin"}}
		{{#if hasParticipants}}
			{{>downloadRobots}}
		{{/if}}
	{{/if}}

	</div>
</template>



<template name="tournamentParticipants">
	<!-- <h2>Teilnehmer</h2> -->
		{{#each particpatingRobots}}
			<div class="row">
			{{#each this}}
			{{>tournamentRobot}}
			{{/each}}
			</div>
		{{/each}}
</template>



<template name="tournamentEntry">
	
	<h3>Teilnehmen</h3>
	{{#if userHasGroup}}
	
		{{#if userGroupHasMainbot}}
		<p>{{mainbotName}}</p>
		<p><i class="mdi mdi-checkbox-marked-circle" name="signUpForTournament"></i> </p>
		{{else}}
		<p>Kein Gruppenroboter ausgewählt</p>
		{{/if}}

	{{else}}
	<p>Du brauchst eine Gruppe um einem Turnier beitreten zu können</p>
	{{/if}}

	<!-- <p><button id="tournamentEntryButton" class="borderButton">Teilnehmen</button></p> -->


	
	
</template>

<template name="downloadRobots">
	<!-- Der Download Code befindet sich in der action Methode der entsprechenden Route auf dem Server -->
	<p><a id="downloadRobots" href="{{this._id}}/download"><button class="borderButton">Roboter downloaden</button></a></p>
</template>


<template name="tournamentRobot">
		<div class="col s12 m4 l4 robot">
		<h3>{{name}} {{#if belongsToUser}}{{#unless ended}} <i class="mdi mdi-close" name="signOutRobot"></i> {{/unless}}{{/if}}</h3>
		<p class="owner"><a href="{{pathFor route='profile' _id=belongsTo }}">{{uploaderName belongsTo}}</a></p>
		</div>
</template>